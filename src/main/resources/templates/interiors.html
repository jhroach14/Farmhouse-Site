<div class="container-fluid" ng-controller="interiorsCtrl">
    <div class="row">
        <div id = "content-col" class = "col-md-12">
            <script src="/js/siema.min.js"></script>
            <span id="left-arrow" class="arrow prev glyphicon glyphicon-chevron-left"></span>
            <div class="siema">
                <div th:each="interior :  ${page.interiors}">
                    <h3 class="int-title" th:text="${interior.address}"></h3>
                    <ul class="lightSlider">
                        <li class="ls-li" th:each="photo : ${interior.photos}" th:attr="data-thumb=${photo?.thumb_path}">
                            <img class="ls-img" th:src="${photo?.photo_path}" th:alt="${photo?.photo_text}" />
                        </li>
                    </ul>
                </div>
            </div>
            <span id="right-arrow" class="arrow next glyphicon glyphicon-chevron-right"></span>
            <script>
                const mySiema = new Siema();
                document.querySelector('.prev').addEventListener('click', () => mySiema.prev());
                document.querySelector('.next').addEventListener('click', () => mySiema.next());
            </script>

            <div class="dropdown">
                <button class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown">Addresses<span class="caret"></span> </button>
                <ul class="dropdown-menu">
                    <li th:each="interior,iter : ${page.interiors}">
                        <p th:classappend="|dropdown${iter.index}|" th:text="${interior.address}"></p>
                        <script th:utext='|document.querySelector(".dropdown${iter.index}").addEventListener("click", () => mySiema.goTo(${iter.index}));|'>  </script>
                    </li>
                </ul>
            </div>
        </div>
    </div>
    <button ng-click="loadEditData()" data-target="#edit-page-modal" data-toggle="modal" title="modify page"
            id="modify-page" th:if="${page.permissions == '/admin'}" class="btn btn-default">
        <span class="glyphicon glyphicon-pencil"> Edit Page</span>
    </button>
    <div class="modal fade" id="edit-page-modal" th:if="${page.permissions == '/admin'}">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">Close</button>
                    <h4 class="modal-title">Modify Interiors Page</h4>
                </div>
                <div class="modal-body">
                    <form id="interiors-form" class="form-horizontal">
                        <div ng-repeat="interior in interiors" class="form-group"> <!--for each interior-->
                            <div class="col-sm-10">
                                <button style="background-color: red; color: white;border: transparent" class="btn-danger" ng-click="deleteInterior(interior)" id="delete-interior" title="delete">DELETE {{interior.address}}</button>
                                <div class="form-group">
                                    <label class="control-label col-sm-2" for="addr">Address</label>
                                    <div class="col-sm-10" >
                                        <input id="addr" type="text" class="form-control" ng-model="interior.address"/>
                                    </div>
                                </div>
                                <div ng-repeat="photo in interior.photos track by $index" class="form-group">
                                    <label class="control-label col-sm-2" for="photo{{$index}}">
                                        <p>Photo {{$index}}</p>
                                        <img id="thumb1" ng-src="{{interior.photos[$index].thumb_path}}"/>
                                    </label>
                                    <div class="col-sm-10">
                                        <select class="form-control" id="photo{{$index}}">
                                            <option ng-repeat="photoOpt in photoList" ng-selected="photo.id==photoOpt.id"
                                                    ng-value="photoOpt.id" ng-click="selectPhoto(interior,photoOpt,$parent.$index)">
                                                <p>{{photoOpt.photo_path}}</p>
                                            </option>
                                        </select>
                                        <button class="btn-danger" style="background-color: red; color: white;border: transparent" ng-click="deletePhoto(interior, photo)" id="delete-photo" title="delete">DELETE</button>
                                    </div>
                                </div>
                                <hr/>
                                <div>
                                    <p style="font-weight: bold; padding-left: 5px">Add Photo?</p>
                                </div>
                                <div class="col-sm-10">
                                    <select class="form-control">
                                        <option ng-repeat="photoOpt in photoList" ng-value="photoOpt.id"
                                                ng-click="selectNewPhoto(photoOpt)">
                                            <p>{{photoOpt.photo_path}}</p>
                                        </option>
                                    </select>
                                    <div class="form-group">
                                        <input ng-click="addPhoto(interior)" type="submit" class="btn btn-default add-photo" value="Add"/>
                                    </div>
                                    <div class="form-group">
                                        <input ng-click="saveInterior(interior)" type="submit" class="btn btn-default" value="Save Interior" data-dismiss="modal" />
                                    </div>
                                </div>
                                <hr/>
                            </div>
                        </div>
                        <hr/>
                        <div>
                            <p style="font-weight: bold; padding-left: 5px">Add Interior?</p>
                        </div>
                        <div class="col-sm-12">
                            <div class="form-group">
                                <input ng-click="addInterior()" type="submit" class="btn btn-default add-interior" value="Add" data-dismiss="modal" />
                            </div>
                        </div>
                        <hr/>
                        <div class="form-group">
                            <input ng-click="interiorsEdit()" type="submit" class="btn btn-default" style="position: absolute;bottom:0;left:0;" value="Save"
                                   data-dismiss="modal"/>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
