<div class="container-fluid" ng-controller="inspireCtrl">
    <div class="row main">
        <div class="col-md-9">
            <!--Blogposts-->
            <h2 id="blog-title">
                Blog Posts
                <button ng-click="loadPostData()" th:if="${page.permissions == '/admin'}" data-target="#new-post-modal" data-toggle="modal" class="btn btn-default">
                    <span class="glyphicon glyphicon-plus"></span>
                    New Post
                </button>
            </h2>
            <div id="post-container" class="panel-group">
                <div class="panel panel-default" th:each="post : ${page.posts}">
                    <div class="panel-heading">
                        <h3 id="post-title" th:text="|${post.post_title} - ${post.post_date}|"></h3>
                        <span th:if="${page.permissions == '/admin'}" data-target="#edit-post-modal" data-toggle="modal" th:onclick="${'modifyPost('+post.id+');'}" id="modify-post" title="modify" class="glyphicon glyphicon-pencil"></span>
                        <span th:if="${page.permissions == '/admin'}"  data-toggle="modal" th:onclick="${'deletePost('+post.id+');'}" id="delete-post" title="delete" class="glyphicon glyphicon-remove"></span>
                    </div>
                    <div class="panel-body" th:text="${post.post_text}"></div>
                    <img th:if="${post.post_type==1}" th:src="${post.photo.photo_path}"/>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <!--SideBar-->
            <div id="sidebar">
                <h3 th:text="${page.side_title}"></h3>
                <div id="sidebar-text" th:text="${page.side_text}"></div>
            </div>
        </div>
    </div>
    <button ng-click="loadEditData()" data-target="#edit-page-modal" data-toggle="modal"  title="modify page" id="modify-page" th:if="${page.permissions == '/admin'}" class="btn btn-default">
        <span class="glyphicon glyphicon-pencil"> Edit Page</span>
    </button>
    <div class="modal fade" id="edit-post-modal" th:if="${page.permissions == '/admin'}">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">Close</button>
                    <h4 class="modal-title">Edit Post</h4>
                </div>
                <div class="modal-body">
                    <form id ="edit-post-form" class="form-horizontal">
                        <div class="form-group">
                            <label class="control-label col-sm-2" for="edit-post-title">Post Title</label>
                            <div class="col-sm-10" >
                                <input id="edit-post-title" type="text" class="form-control" ng-model="selectedPost.post_title"/>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-sm-2" for="edit-post-text">Post Text</label>
                            <div class="col-sm-10" >
                                <textarea id="edit-post-text" form="edit-post-form" class="form-control" ng-model="selectedPost.post_text"></textarea>
                            </div>
                        </div>
                        <div ng-if="selectedPost.post_type==1" class="form-group">
                            <label class="control-label col-sm-2" for="pic-drop2">
                                <p>Photo</p>
                                <img id="thumb2" ng-src="http://localhost:8080{{selectedPost.photo.thumb_path}}" />
                            </label>
                            <div class="col-sm-10" >
                                <select class="form-control" id="pic-drop2">
                                    <option ng-repeat="photo in photos" ng-selected="photo.id==selectedPost.photo.id" ng-value="photo.id" ng-click="selectEditPhoto(photo)">
                                        <p>{{photo.photo_path}}</p>
                                    </option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <input ng-click="savePost()" type="submit" class="btn btn-default" value="Save" data-dismiss="modal"/>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="new-post-modal" th:if="${page.permissions == '/admin'}">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">Close</button>
                    <h4 class="modal-title">New Blog Post</h4>
                </div>
                <div class="modal-body">
                    <form id ="new-post-form" class="form-horizontal">
                        <div class="form-group">
                            <label class="control-label col-sm-2" for="new-post-title">Post Title</label>
                            <div class="col-sm-10" >
                                <input required="true" id="new-post-title" type="text" class="form-control" ng-model="newPost.post_title"/>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-sm-2" for="post-text">Post Text</label>
                            <div class="col-sm-10" >
                                <textarea id="post-text" form="new-post-form" class="form-control" ng-model="newPost.post_text"></textarea>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-sm-2" for="post-type">Post Media Type</label>
                            <select required="true" class="form-control" id="post-type">
                                <option ng-click="postType(0)"> No Media</option>
                                <option ng-click="postType(1)">Photo</option>
                                <option ng-click="postType(2)">Video</option>
                            </select>
                        </div>
                        <div ng-if="newPost.post_type==1" class="form-group">
                            <label class="control-label col-sm-2" for="pic-drop">
                                <p>Photo</p>
                                <img id="thumb1" ng-src="http://localhost:8080{{newPost.photo.thumb_path}}" />
                            </label>
                            <div class="col-sm-10" >
                                <select class="form-control" id="pic-drop">
                                    <option ng-repeat="photo in photos" ng-selected="photo.id==newPost.photo.id" ng-value="photo.id" ng-click="selectPhoto(photo)">
                                        <p>{{photo.photo_path}}</p>
                                    </option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <input ng-click="saveNewPost()" type="submit" class="btn btn-default" value="Save" data-dismiss="modal"/>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="edit-page-modal" th:if="${page.permissions == '/admin'}">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal"></button>
                    <h4 class="modal-title">Modify Inspire Page</h4>
                </div>
                <div class="modal-body">
                    <form id ="inspire-form" class="form-horizontal">
                        <div class="form-group">
                            <label class="control-label col-sm-2" for="side-title">Side Title</label>
                            <div class="col-sm-10" >
                                <input id="side-title" type="text" class="form-control" ng-model="inspireInfo.side_title"/>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-sm-2" for="side-text">Side Text</label>
                            <div class="col-sm-10" >
                                <textarea id="side-text" form="inspire-form" class="form-control" ng-model="inspireInfo.side_text"></textarea>
                            </div>
                        </div>
                        <div class="form-group">
                            <input ng-click="inspireEdit()" type="submit" class="btn btn-default" value="Save" data-dismiss="modal"/>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>